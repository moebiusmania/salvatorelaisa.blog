---
import Page from '../layouts/page.astro'
import PostPreview from '../components/PostPreview.astro'
import Container from '../components/Container.astro'
import { SITE_DESCRIPTION } from '../config'

const posts = (await Astro.glob('./post/*.{md,mdx}'))
  .filter((post) => !post.frontmatter.draft)
  .sort((a, b) => new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf())
  .filter((post, index) => index < 5)
---

<Page>
  <Container>
    <p class="text-xl leading-7 text-secondary">{SITE_DESCRIPTION}</p>
    <ul class="my-8 divide-y divide-primary-content">
      {posts.map((post) => <PostPreview post={post} />)}
    </ul>
    <div class="flex justify-end text-base font-medium leading-6">
      <a
        href="/post/page/1"
        class="text-primary hover:primary-focus"
        aria-label="Tutti gli articoli"
      >
        Tutti gli articoli &rarr;
      </a>
    </div>
  </Container>
</Page>
